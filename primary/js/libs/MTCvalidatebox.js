$(function(){var validateTipId=0;$.validate=(function(){function Handler(){this.init=function(options){this.options=$.extend(this.options,options);this._elems=$(".validate-box");this._elems.on("blur.validate keyup.validate focus.validate",function(e){var eventType=e?e.type:null;Validate.check.call(this,eventType)})};this.checkAll=function(wrapID){var _validate=handler,errorMsg=null,$checkElems=wrapID?$(wrapID).find(".validate-box"):_validate._elems;Validate.errNum=0;if($checkElems.length>0){$checkElems.each(function(){Validate.check.call(this)})}if(Validate.errNum==0){errorMsg=_validate.options.custom();if(errorMsg){_validate.options.error(errorMsg);return false}else{_validate.options.success()}return true}else{return false}}}Handler.prototype.options={custom:null,success:function(){},error:function(){}};var handler=new Handler();return(function(options){handler.init(options);return handler})})();var Validate={errNum:0,isHidden:function(elem){if(!elem){return}return $.css(elem,"display")==="none"||$.css(elem,"visibility")==="hidden"||(elem.offsetHeight==0&&elem.offsetWidth==0)},isDisabled:function(elem){if(!elem){return}return elem.getAttribute("disabled")},check:function(eventType){var options=$.parseJSON($(this).attr("data-box")||""),type=options.dataType,args=[$(this).val()];args=args.concat(options.args||[]);var str;if(typeof validateType[type]=="function"){str=validateType[type].apply(this,args)}else if(typeof validateType[type]=="object"&&typeof validateType[type].all=="function"){str=validateType[type].all.apply(validateType[type],args)}if($(this).hasClass("data-box-error")){Validate.removeTips(this)}if((!Validate.isHidden(this)&&!Validate.isDisabled(this))){if($(this).val()==""&&((this.getAttribute('required')==='required')||typeof this.required!=='undefined')&&(this.getAttribute('required')!==null)){str=_("this is required");Validate.addTips(str,this)}else{if($(this).val()!=""){if(str){Validate.addTips(str,this)}}}}},addTips:function(str,elem){function createTipElem(id,str,elem){var tipElem=document.createElement('small'),tipId="reasy-validate-tip-"+id;tipElem.className="text-danger text-left";tipElem.setAttribute('id',tipId);tipElem.innerHTML=str;elem.validateTipId=tipId;return tipElem}return $(elem).each(function(){$(this).addClass("data-box-error");Validate.errNum+=1;tipElem=createTipElem(validateTipId++,str,this);$(this).parent().append(tipElem)})},showTips:function(){},hideTips:function(){},removeTips:function(elem){return $(elem).each(function(){if((this.validateTipId||"")){$(this).removeClass("data-box-error");$("#"+this.validateTipId).remove();Validate.errNum-=1;if(Validate.errNum<1){Validate.errNum=0}}})}};var validateType={len:function(str,min,max){var len=str.length;if(len<min||len>max){return _('%s - %s characters are required.',[min,max])}},num:function(str,min,max){if(!(/^[0-9]{1,}$/).test(str)){return _("Must be integer")}if(min&&max){if(parseInt(str,10)<min||parseInt(str,10)>max){return _("Input range is: %s - %s",[min,max])}}},mac:{all:function(str){var ret=this.specific(str);if(ret){return ret}if(!(/^([0-9a-fA-F]{2}:){5}[0-9a-fA-F]{2}$/).test(str)){return _("Please input a valid MAC address.")}},specific:function(str){var subMac1=str.split(':')[0];if(subMac1.charAt(1)&&parseInt(subMac1.charAt(1),16)%2!==0){return _('The second character must be even number.')}if(str==="00:00:00:00:00:00"){return _('MAC can not be 00:00:00:00:00:00.')}}},ip:{all:function(str){var ret=this.specific(str);if(ret){return ret}if(!(/^([1-9]|[1-9]\d|1\d\d|2[0-1]\d|22[0-3])\.(([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.){2}([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-4])$/).test(str)){return _("Please input a valid IP address.")}},specific:function(str){var ipArr=str.split('.'),ipHead=ipArr[0];if(ipArr[0]==='127'){return _("The IP address starting with 127 is a loopback address, please try another.")}if(ipArr[0]>223){return _("The value %s is invalid, please enter value between 1-223.",[ipHead])}}},ip_2:{all:function(str){if(str!=""&&str!="0.0.0.0"){var ret=this.specific(str);if(ret){return ret}if(!(/^([1-9]|[1-9]\d|1\d\d|2[0-1]\d|22[0-3])\.(([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.){2}([1-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-4])$/).test(str)){return _("Please input a valid IP address.")}}},specific:function(str){var ipArr=str.split('.'),ipHead=ipArr[0];if(ipArr[0]==='127'){return _("The IP address starting with 127 is a loopback address, please try another.")}if(ipArr[0]>223){return _("The value %s is invalid, please enter value between 1-223.",[ipHead])}}},dns:function(){},mask:function(str){var rel=/^(254|252|248|240|224|192)\.0\.0\.0$|^(255\.(254|252|248|240|224|192|128|0)\.0\.0)$|^(255\.255\.(254|252|248|240|224|192|128|0)\.0)$|^(255\.255\.255\.(252|248|240|224|192|128|0))$/;if(!rel.test(str)){return _("Please input a valid subnet mask")}},email:function(str){var rel=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;if(!rel.test(str)){return _("Please input a valid E-mail address")}},time:function(str){if(!(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/).test(str)){return _("Please input a valid time.")}},hex:function(str){if(!(/^[0-9a-fA-F]{1,}$/).test(str)){return _("Must be HEX.")}},ascii:function(str,min,max){if(!(/^[ -~]+$/g).test(str)){return _("Must be ASCII.")}if(min||max){return validateType.len(str,min,max)}},pwd:function(str,minLen,maxLen){var ret;if(!(/^[0-9a-zA-Z]+$/).test(str)){return _('Must be numbers and letters')}if(minLen&&maxLen){ret=validateType.len(str,minLen,maxLen);if(ret){return ret}}},username:function(str){if(!(/^\w{1,}$/).test(str)){return _("Please input a valid user name.")}},ssid:function(str){var length=str.replace(/[^\x00-\xff]/g,'aaa').length;if((/[^\x00-\xff]/).test(str)){return _("Please input english character.")}if(length>32){return _("The length should not be greater than 32 characters.")}},ssidPasword:function(str,minLen,maxLen){var ret;ret=validateType.ascii(str);if(!ret&&minLen&&maxLen){ret=validateType.len(str,minLen,maxLen);if(ret){return ret}}return ret},domain:function(str){if(/^[-_~\|\#\?&\\\/\.%0-9a-z]+$/ig.test(str)){if(/.+\..+/ig.test(str)||str=="localhost"){}else{return _("Please input a valid domain name.")}}else{return _("Please input a valid domain name.")}},ping:function(str){var ret=validateType.domain(str);if(ret){validateType.ip.all(str)}}};$.validate.prototype.type=validateType;$.validate({custom:function(){},success:function(){},error:function(msg){top.showModuleMsg(msg)}})});function refresh(){window.location.reload(true)}function checkTimeOut(str){if(str.indexOf('<!DOCTYPE html>')>-1){return true}return false}function trimStr(str){return str.replace(/(^\s*)|(\s*$)/g,"")}function autoFocus(){var $this=$(this),maxLen=$this.attr('maxlength'),len=$this.val().length;if(len==maxLen){$this.next().focus()}}function inputDomValue(obj,callback){var prop,tagName;for(prop in obj){if(prop&&$("#"+prop).length>0){tagName=document.getElementById(prop).tagName.toLowerCase();switch(tagName){case "input":case "select":if(document.getElementById(prop).type=="checkbox"){if(obj[prop]=="1"){document.getElementById(prop).checked=true}else{document.getElementById(prop).checked=false}}else{$("#"+prop).val(obj[prop])}break;default:if($("#"+prop).hasClass("textboxs")||$("#"+prop).hasClass("input-append")){$("#"+prop)[0].val(obj[prop])}else{$("#"+prop).text(obj[prop])}break}}else if(prop&&$("[name='"+prop+"']").length>1){tagName=document.getElementsByName(prop)[0].tagName.toLowerCase();if(tagName==="input"){if($("[name='"+prop+"'][value='"+obj[prop]+"']").length>0){$("[name='"+prop+"'][value='"+obj[prop]+"']")[0].checked=true}}}};if(typeof callback=="function"){callback.apply()}}function stringToTime(time){var unDays=parseInt(time/(24*60*60),10),unHours=parseInt((time%(24*60*60))/(60*60),10),unMinutes=parseInt(((time%(24*60*60))%(60*60))/60,10),unSeconds=((time%(24*60*60))%(60*60))%60;unHours=(unHours<10)?("0"+unHours):unHours;unMinutes=(unMinutes<10)?("0"+unMinutes):unMinutes;unSeconds=(unSeconds<10)?("0"+unSeconds):unSeconds;return unDays+_("day(s)")+unHours+":"+unMinutes+":"+unSeconds}function timeDecode(str){var str1=str.split(" ");var Week=str1[1];if("Sun"==Week){return str1[0]+" "+_("Sun")+" "+str1[2]}else if("Mon"==Week){return str1[0]+" "+_("Mon")+" "+str1[2]}else if("Tue"==Week){return str1[0]+" "+_("Tue")+" "+str1[2]}else if("Wed"==Week){return str1[0]+" "+_("Wed")+" "+str1[2]}else if("Thu"==Week){return str1[0]+" "+_("Thu")+" "+str1[2]}else if("Fri"==Week){return str1[0]+" "+_("Fri")+" "+str1[2]}else{return str1[0]+" "+_("Sat")+" "+str1[2]}}function checkIpInSameSegment(ip_lan,mask_lan,ip_wan,mask_wan){if(ip_lan===''||ip_wan===''){return false}var ip1Arr=ip_lan.split("."),ip2Arr=ip_wan.split("."),maskArr1=mask_lan.split("."),maskArr2=mask_wan.split("."),maskArr=maskArr1,i;for(i=0;i<4;i+=1){if(maskArr1[i]!=maskArr2[i]){if(maskArr1[i]&maskArr2[i]==maskArr1[i]){maskArr=maskArr1}else{maskArr=maskArr2}break}}for(i=0;i<4;i+=1){if((ip1Arr[i]&maskArr[i])!=(ip2Arr[i]&maskArr[i])){return false}}return true}function rangeCheck(v,a,b,s){if(!validNumCheck(v,s)){return 0}if((v.value<a)||(v.value>b)){top.showModuleMsg(_("%s is out of range!!!",[s]));v.value=v.defaultValue;return 0}else{return 1}}function validNumCheck(v,m){var t=/^[0-9]{1,}$/;if(!t.test(v.value)){top.showModuleMsg(_("%s isn't a number!!!",[m]));v.value=v.defaultValue;return 0}return 1}function fit2(n){var s=String(n+100).substr(1,2);return s}function timeStr(t){if(t<0){str='00:00:00';return str}var s=t%60;var m=parseInt(t/60)%60;var h=parseInt(t/3600)%24;var d=parseInt(t/86400);var str='';if(d>999){return _('Forever')}if(d){str+=d+_('days ')}str+=fit2(h)+':';str+=fit2(m)+':';str+=fit2(s);return str}function verifyIP2(ipa,msg,subnet){var tip=/^[0-9]{1,}$/;ip=[];if(ipa.length==4){for(var i=0;i<4;i+=1){ip[i]=ipa[i].value}}else{ip=ipa.value.split(".")}if(ip.length!=4){alert(_("%s invalid!!!",[msg]));ipa.value="0.0.0.0";return false}for(i=0;i<4;i+=1){if(!tip.test(ip[i])){alert(_("%s contains invalid char!",[msg]));ipa.value="0.0.0.0";return 0}}if(ip[0]==0||((ip[0]==127)&&(ip[3]==0))){alert(_("%s invalid!!!",[msg]));ipa.value="0.0.0.0";return false}if(ip[1]==""||ip[2]==""){alert(_("%s invalid!!!",[msg]));ipa.value="0.0.0.0";return false}if(ip[1]==" "||ip[2]==" "){alert(_("%s invalid!!!",[msg]));ipa.value="0.0.0.0";return false}if(ip[0]>=224){alert(_("%s invalid!!!",[msg]));ipa.value="0.0.0.0";return false}for(var i=0;i<4;i+=1){d=ip[i];if(d<256&&d>=0){if(i!=3||subnet==1){continue}else{if(d!=255&&d!=0){continue}}}alert(_("%s invalid!!!",[msg]));ipa.value="0.0.0.0";return false}return true}function macsCheck(I,s){var m=/[0-9a-fA-F\:]{17}/;if(I.length!=17||!m.test(I)){alert(_("%s invalid!!!",s));I.value=I.defaultValue;return false}return true}function ckMacReserve(mac){var m=mac.split(":");for(var i=0;i<6;i+=1){m[i]=m[i].toUpperCase()}var ms=m[0]+":"+m[1]+":"+m[2]+":"+m[3]+":"+m[4]+":"+m[5];if(ms=="00:00:00:00:00:00"||ms=="FF:FF:FF:FF:FF:FF"){alert(_("The MAC address is reserved, please input a new one."));return false}if(parseInt(m[0],16)&1==1){alert(_("The MAC address is multicast address, please input a new one."));return false}return true}function IsReboot(){if(confirm(_("Are you Sure to reboot the Router right now?"))){return 1}else{return 0}}var base64EncodeChars='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%2b/index.html';function utf16to8(str){var out,i,len,c;out="";len=str.length;for(i=0;i<len;i+=1){c=str.charCodeAt(i);if((c>=0x0001)&&(c<=0x007F)){out+=str.charAt(i)}else if(c>0x07FF){out+=String.fromCharCode(0xE0|((c>>12)&0x0F));out+=String.fromCharCode(0x80|((c>>6)&0x3F));out+=String.fromCharCode(0x80|((c>>0)&0x3F))}else{out+=String.fromCharCode(0xC0|((c>>6)&0x1F));out+=String.fromCharCode(0x80|((c>>0)&0x3F))}}return out}function base64encode(str){var out,i,len;var c1,c2,c3;len=str.length;i=0;out="";while(i<len){c1=str.charCodeAt(i++)&0xff;if(i==len){out+=base64EncodeChars.charAt(c1>>2);out+=base64EncodeChars.charAt((c1&0x3)<<4);out+="==";break}c2=str.charCodeAt(i++);if(i==len){out+=base64EncodeChars.charAt(c1>>2);out+=base64EncodeChars.charAt(((c1&0x3)<<4)|((c2&0xF0)>>4));out+=base64EncodeChars.charAt((c2&0xF)<<2);out+='=';break}c3=str.charCodeAt(i++);out+=base64EncodeChars.charAt(c1>>2);out+=base64EncodeChars.charAt(((c1&0x3)<<4)|((c2&0xF0)>>4));out+=base64EncodeChars.charAt(((c2&0xF)<<2)|((c3&0xC0)>>6));out+=base64EncodeChars.charAt(c3&0x3F)}return out}function ipCheck(srcip,dstip,mask){var sip=srcip.split('.');var dip=dstip.split('.');var lanmsk=mask.split('.');if(sip[0]==dip[0]){if(sip[0]<128&&lanmsk[1]=="0"){return true}}else{return false}if(sip[1]==dip[1]){if(sip[0]<192&&lanmsk[2]=="0"){return true}}else{return false}if(sip[2]==dip[2]){if(sip[0]<224&&lanmsk[3]=="0"){return true}}else{return false}}function decodeBuf(encode_buf){var e=document.createElement("div"),org_buf='';if(!encode_buf){return org_buf}e.innerHTML=encode_buf.replace(/\x20/g,"\xA0");if(e.innerText){org_buf=e.innerText}else if(e.textContent){org_buf=e.textContent}e=null;return org_buf.replace(/\xA0/g,"\x20")}+function($){'use strict';var backdrop='.dropdown-backdrop';var toggle='[data-toggle="dropdown"]';var Dropdown=function(element){$(element).on('click.bs.dropdown',this.toggle)};Dropdown.VERSION='3.3.6';function getParent($this){var selector=$this.attr('data-target');if(!selector){selector=$this.attr('href');selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,'');}var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}function clearMenus(e){if(e&&e.which===3){return}$(backdrop).remove();$(toggle).each(function(){var $this=$(this);var $parent=getParent($this);var relatedTarget={relatedTarget:this};if(!$parent.hasClass('open')){return}if(e&&e.type=='click'&&/input|textarea/i.test(e.target.tagName)&&$.contains($parent[0],e.target)){return}$parent.trigger(e=$.Event('hide.bs.dropdown',relatedTarget));if(e.isDefaultPrevented()){return}$this.attr('aria-expanded','false');$parent.removeClass('open').trigger($.Event('hidden.bs.dropdown',relatedTarget))})}Dropdown.prototype.toggle=function(e){var $this=$(this);if($this.is('.disabled, :disabled')){return}var $parent=getParent($this);var isActive=$parent.hasClass('open');clearMenus();if(!isActive){if('ontouchstart'in document.documentElement&&!$parent.closest('.navbar-nav').length){$(document.createElement('div')).addClass('dropdown-backdrop').insertAfter($(this)).on('click',clearMenus)}var relatedTarget={relatedTarget:this};$parent.trigger(e=$.Event('show.bs.dropdown',relatedTarget));if(e.isDefaultPrevented()){return}$this.trigger('focus').attr('aria-expanded','true');$parent.toggleClass('open').trigger($.Event('shown.bs.dropdown',relatedTarget))}return false};Dropdown.prototype.keydown=function(e){if(!/(38|40|27|32)/.test(e.which)||/input|textarea/i.test(e.target.tagName)){return}var $this=$(this);e.preventDefault();e.stopPropagation();if($this.is('.disabled, :disabled')){return}var $parent=getParent($this);var isActive=$parent.hasClass('open');if(!isActive&&e.which!=27||isActive&&e.which==27){if(e.which==27){$parent.find(toggle).trigger('focus')}return $this.trigger('click')}var desc=' li:not(.disabled):visible a';var $items=$parent.find('.dropdown-menu'+desc);if(!$items.length){return}var index=$items.index(e.target);if(e.which==38&&index>0){index--;}if(e.which==40&&index<$items.length-1){index++;}if(!~index){index=0}$items.eq(index).trigger('focus')};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data('bs.dropdown');if(!data){$this.data('bs.dropdown',(data=new Dropdown(this)))}if(typeof option=='string'){data[option].call($this)}})}var old=$.fn.dropdown;$.fn.dropdown=Plugin;$.fn.dropdown.Constructor=Dropdown;$.fn.dropdown.noConflict=function(){$.fn.dropdown=old;return this};$(document).on('click.bs.dropdown.data-api',clearMenus).on('click.bs.dropdown.data-api','.dropdown form',function(e){e.stopPropagation()}).on('click.bs.dropdown.data-api',toggle,Dropdown.prototype.toggle).on('keydown.bs.dropdown.data-api',toggle,Dropdown.prototype.keydown).on('keydown.bs.dropdown.data-api','.dropdown-menu',Dropdown.prototype.keydown)}(jQuery);